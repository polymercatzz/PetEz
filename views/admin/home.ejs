<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
</head>

<body class="font-[kanit]">
  <%- include('../partials/admin-sidebar', { activeMenu: 'home' }) %>

  <div class="ml-0 lg:ml-[300px] px-4 py-6 bg-gray-50 min-h-screen">
    <div class="bg-white rounded-lg shadow-md p-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-6">Admin Dashboard</h1>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Total Users Card -->
        <div class="bg-blue-500 text-white p-6 rounded-lg shadow">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold">Total Users</h3>
              <p class="text-3xl font-bold" id="totalUsers">0</p>
            </div>
            <i class="bi bi-people-fill text-4xl opacity-75"></i>
          </div>
        </div>

        <!-- Total Pet Sitters Card -->
        <div class="bg-green-500 text-white p-6 rounded-lg shadow">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold">Pet Sitters</h3>
              <p class="text-3xl font-bold" id="totalPetSitters">0</p>
            </div>
            <i class="bi bi-heart-fill text-4xl opacity-75"></i>
          </div>
        </div>

        <!-- Total Bookings Card -->
        <div class="bg-yellow-500 text-white p-6 rounded-lg shadow">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold">Total Bookings</h3>
              <p class="text-3xl font-bold" id="totalBookings">0</p>
            </div>
            <i class="bi bi-calendar-check text-4xl opacity-75"></i>
          </div>
        </div>

        <!-- Pending Approvals Card -->
        <div class="bg-red-500 text-white p-6 rounded-lg shadow">
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-lg font-semibold">Pending Approvals</h3>
              <p class="text-3xl font-bold" id="pendingApprovals">0</p>
            </div>
            <i class="bi bi-clock-fill text-4xl opacity-75"></i>
          </div>
        </div>
      </div>

      <!-- Recent Activities -->
      <div class="bg-white rounded-lg shadow">
        <div class="p-6 border-b">
          <h2 class="text-xl font-semibold">Recent Activities</h2>
        </div>
        <div class="p-6">
          <div id="recentActivities" class="space-y-4">
            <!-- Activities will be loaded here -->
            <div class="text-gray-500 text-center py-8">
              Loading activities...
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Load dashboard data
    async function loadDashboardData() {
      try {
        // Load statistics
        const response = await fetch('/admin/api/dashboard-stats');
        if (response.ok) {
          const stats = await response.json();
          document.getElementById('totalUsers').textContent = stats.totalUsers || 0;
          document.getElementById('totalPetSitters').textContent = stats.totalPetSitters || 0;
          document.getElementById('totalBookings').textContent = stats.totalBookings || 0;
          document.getElementById('pendingApprovals').textContent = stats.pendingApprovals || 0;
        }
      } catch (error) {
        console.error('Error loading dashboard data:', error);
      }
    }

    // Load dashboard data on page load
    document.addEventListener('DOMContentLoaded', loadDashboardData);
  </script>
</body>
</html>